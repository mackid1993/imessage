# Display name template for iMessage contacts.
# Available variables: {{.FirstName}}, {{.LastName}}, {{.Nickname}},
# {{.Phone}}, {{.Email}}, {{.ID}}
displayname_template: "{{if .FirstName}}{{.FirstName}}{{if .LastName}} {{.LastName}}{{end}}{{else if .Nickname}}{{.Nickname}}{{else if .Phone}}{{.Phone}}{{else if .Email}}{{.Email}}{{else}}{{.ID}}{{end}}"

# Enable CloudKit message history backfill.
# When true, the bridge will sync past messages from iCloud during setup.
# Requires entering your device PIN during login to join the iCloud Keychain.
# When false (default), only real-time messages are bridged — no PIN needed.
cloudkit_backfill: false

# Backfill source: "cloudkit" (default) syncs from iCloud.
# "chatdb" reads the local macOS chat.db (requires Full Disk Access).
backfill_source: cloudkit

# Override the outgoing iMessage identity (what recipients see your messages "from").
# Use the full URI format: "tel:+15551234567" or "mailto:user@example.com".
# Leave empty to use the handle chosen during login.
# Available handles are logged on startup.
preferred_handle: ""

# External CardDAV server for contact name resolution.
# Works with Google (app passwords), Nextcloud, Radicale, Fastmail, etc.
# When configured, this is used instead of iCloud contacts.
# Set up during install or via: ./mautrix-imessage-v2 carddav-setup
carddav:
    # Email address — used for auto-discovery and as default username.
    email: ""
    # CardDAV server URL. Leave empty to auto-discover from email.
    url: ""
    # Username for authentication (defaults to email if empty).
    username: ""
    # Encrypted app password (set by carddav-setup command).
    password_encrypted: ""
